include "example.conf"

akka {
  remote {
    artery {
      # 複数 ActorSystem が起動すると bind port が重複して起動に失敗する可能性があるので、テスト時は(0)ランダムに設定
      canonical.port = 0
    }
  }
}

akka.actor {
  allow-java-serialization = off
}

lerna.akka.entityreplication.raft {
  persistence {
    journal.plugin = "inmemory-journal"
    snapshot-store.plugin = "inmemory-snapshot-store"
    query.plugin = "inmemory-read-journal"
  }
}

lerna.akka.entityreplication.raft.eventhandler {
  persistence {
    journal.plugin = "inmemory-journal"
    query.plugin = "inmemory-read-journal"
  }
}

inmemory-journal {
  // TODO: auto setting
  event-adapters {
    raft-tagging = "lerna.akka.entityreplication.raft.persistence.RaftEventAdapter"
  }
  event-adapter-bindings {
    "lerna.akka.entityreplication.raft.RaftActor$CompactionCompleted" = raft-tagging
  }
}
